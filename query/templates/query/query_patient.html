<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>query_patient</title>
</head>
<body>
<h1 style="text-decoration: line-through;">去TMD的查询表单</h1>
<div style="margin:15%,40%">
    <form action="/query_patient/" method="post">
        {% csrf_token %}
        <p>
            <label for="id_patient">请输入病人ID</label>
            <input type="text" id="id_patient" name="patientid" value="{{pid}}" placeholder="病人ID" autofocus>
        </p>
        <p>
            <label for="sex">请选择患者性别</label>
            <input type="text" id="sex" list="sex_list" name='sex' value="{{ psex }}" placeholder="患者性别">
            <datalist id="sex_list">
                <option>男</option>
                <option>女</option>
            </datalist>
        </p>
        <p>
            <label for="age">请选择患者年龄范围</label>
            {% if pages%}
            <input type="number" id="ages" name="ages" value={{pages}} min=0 max=120 >≤年龄≤
            <input type="number" id="agee" name="agee" value={{pagee}} min=0 max=120>
            {% else %}
            <input type="number" id="ages" name="ages" min=0 max=120 >≤年龄≤
            <input type="number" id="agee" name="agee" min=0 max=120>
            {% endif %}
        </p>
        <p>
            <label for="check_date">请输入检查时间范围</label>
            <input type="date" id="date_from" name="datefrom" value="{{date_from}}">
            <input type="date" id="date_to" name="dateto" value="{{date_to}}">
        </p>
        <p>
            <label for="hospital">请选择就诊医院</label>
            <input type="text" id="hospital_name" list="hos_list" name='hospital' value="{{ hospital }}" placeholder="医院名字">
            <datalist id="hos_list">
                <option>邵逸夫医院</option>
                <option>浙江大学医学院第二附属医院</option>
                <option>宁波大学附属医院</option>
                <option>上虞人民医院</option>
                <option>浙江省中医院</option>
                <option>杭州市第一人民医院</option>
                <option>台州医院</option>
                <option>丽水中心医院</option>
                <option>余姚人民医院</option>
                <option>宁波李惠利东部医院</option>
                <option>瑞安人民医院</option>
                <option>福建省立医院</option>
                <option>德清医院</option>
                <option>丽水人民医院</option>
                <option>山西省人民医院</option>
                <option>湖州人民医院</option>
                <option>安贞医院</option>
                <option>嘉兴市第一医院</option>
                <option>西安市中心医院</option>
                <option>龙游县人民医院</option>
                <option>兰州二院</option>
                <option>金华市中心医院</option>
                <option>上海市肿瘤医院宁波病理中心</option>
                <option>乐清人民医院</option>
            </datalist>
        </p>
        <h3>Advance Query</h3><p style="font-size: smaller;">快速建立“查看”链接索引</p> 
        <p>
            <label for="doctor_name">请选择标注疾病的医生</label>
            <input type="text" id="doctor_name" list="named_list" name='doctor_name' value="{{ddoctor}}" placeholder="医生姓名">
            <datalist id="named_list">
                <option>陈飞</option>
                <option>胡伟玲</option>
                <option>杨远航</option>
                <option>张旭</option>
                <option>郑文芳</option>
                <option>胡梦佳</option>
                <option>余涛</option>
                <option>陈睿</option>
                <option>章鑫森</option>
                <option>李晶晶</option>
                <option>林讷</option>
                <option>鄢雪辉</option>
                <option>吕凯琪</option>
                <option>钟兴伟</option>
                <option>刘志红</option>
                <option>李均</option>
                <option>杜平</option>
                <option>张哲</option>
            </datalist>
        </p>
        <p>
            <label for="doctor_a">请选择标注解剖的医生</label>
            <input type="text" id="doctor_a" list="name_list" name='doctor_a' value="{{adoctor}}" placeholder="医生姓名">
            <datalist id="name_list">
                <option>陈飞</option>
                <option>胡伟玲</option>
                <option>杨远航</option>
                <option>张旭</option>
                <option>郑文芳</option>
                <option>胡梦佳</option>
                <option>余涛</option>
                <option>陈睿</option>
                <option>章鑫森</option>
                <option>李晶晶</option>
                <option>林讷</option>
                <option>鄢雪辉</option>
                <option>吕凯琪</option>
                <option>钟兴伟</option>
                <option>刘志红</option>
                <option>李均</option>
                <option>杜平</option>
                <option>张哲</option>
            </datalist>
        </p>
        <p>
            <label for="illness_type">请输入疾病类型</label>
            <input type="text" id="illness_type" name="ill_type" value="{{ill_type}}" placeholder="疾病类型">
        </p>
        <p>
            <label for="a_type">请输入解剖位置</label>
            <input type="text" id="aill_type" name="aill_type" value="{{aill_type}}" placeholder="位置类型">
        </p>
        <p>
            <label for="d_type">请选择疾病标注类型</label>
            <input type="text" id="d_type" list="dtype_list" name='ill_bztype' value="{{bz_type}}" placeholder="标注类型">
            <datalist id="dtype_list">
                <option value="RECTANGLE">Rectangle</option>
                <option value="POLYGON">Polygon</option>
                <option value="HAND">Hand</option>
            </datalist>
        </p>
        <p>
            <label for="a_type">请选择解剖标注类型</label>
            <input type="text" id="a_type" list="atype_list" name='jp_type' value="{{jp_type}}" placeholder="标注类型">
            <datalist id="atype_list">
                <option value="RECTANGLE">Rectangle</option>
                <option value="POLYGON">Polygon</option>
                <option value="HAND">Hand</option>
            </datalist>
        </p>
        <input type="submit" value="查询">
    </form>
{% if patient_num %}
<p>总共查询到{{ patient_num }}个符合条件的病人</p>
{% endif %}

{% if patient_id %}
<table border="1">
    <tr>
        <td>ID</td>
        <td>Name</td>
        <td>Gender</td>
        <td>Age</td>
        <td>Hospital</td>
        <td>Check Date</td>
        <td>疾病标记数量</td>
        <td>解剖标记数量</td>
    </tr>
    {% for id,name,sex,age,hospital,check_date,d_num,a_num in patient_id %}
    <tr>
        <td>{{ id }}</td>
        <td>{{ name }}</td>
        <td>{{ sex }}</td>
        <td>{{ age }}</td>
        <td>{{ hospital }}</td>
        <td>{{ check_date }}</td>
        <td>
            {{ d_num }}
            <a href='javascript:document.form{{ id }}.submit();'>查看</a>
            <form name='form{{ id }}' action="/query_detail/" method="post">
                {% csrf_token %}
                <input type="hidden" name='pid' value={{ id }} >
                <input type="hidden" name='doctor_name' value={{ ddoctor }} >
                <input type="hidden" name='bztype' value={{ bz_type }} >
                <input type="hidden" name='da_type' value={{ ill_type }} >
            </form>
        </td>
        <td>
            {{ a_num }}
            <a href='javascript:document.form{{ id }}2.submit();'>查看</a>
            <form name='form{{ id }}2' action="/query_adetail/" method="post">
                {% csrf_token %}
                <input type="hidden" name='pid' value={{ id }} >
                <input type="hidden" name='doctor_name' value={{ adoctor }} >
                <input type="hidden" name='bztype' value={{ jp_type }} >
                <input type="hidden" name='da_type' value={{ aill_type }} >
            </form>
        </td>
        </tr>
    </tr>
    {% endfor %}
</table>
{% endif %}
</div>
</body>
</html>